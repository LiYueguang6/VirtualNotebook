# 进程通讯

## 基本方法

### 1.管道

本质就是一个文件，一个写一个读

- 匿名管道：是一个内核缓冲区的伪文件，进程间需要存在联系
- 命名管道：写到文件系统上的，进程间不需要存在联系，且可以重复使用

### 2.消息队列（网络）

### 3.信号量

P相当于消费者，V相当于生产者，信号量本身应该就是一个临界资源，保证操作的原子性，最好是主存中的数据。和消息队列的区别就是，只能提供事件的发生的信号，无法获取事件内容。

### 4.共享内存

不同进程映射内存空间到共享内存上，再进行读写

java：MappedByteBuffer类

### 5.socket（网络）



## RPC远程服务调用（网络）

传输过程会将数据序列化和反序列化（字节传输，保证传输完整性和可传递性）。开支比消息队列小，但是需要立即处理消息。





## Socket连接

### Socket服务端
1. 创建Socket对象
2. bind服务器ip和端口
3. listen进行侦听连接
4. accept获取客户端的数据请求（Listen到accept进行了三次握手）返回连接对象和客户端地址
5. recv获取数据
6. send发送数据给客户端
7. 回到5或者6
8. close断开连接（四次挥手）

### Socket客户端
1. 创建Socket对象
2. bind是可选的
3. connect进行服务端连接请求
4. send向服务器发送请求
5. recv获取服务器返回的数据
6. 回到4或者5
7. close断开连接（四次挥手）

![](Socket中tcp和udp的区别.png)